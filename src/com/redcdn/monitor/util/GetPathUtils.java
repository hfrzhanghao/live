/**
 * 
 */
package com.redcdn.monitor.util;

import java.util.HashMap;
import java.util.Map;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;

/**
 * @Author 刘艳伟
 * @date 2014-2-18下午3:00:19
 * @类功能　
 */
public class GetPathUtils {

	/**
	 * 可达路径
	 */
	public Map<String,String> pathInfo(String string) {
		Map<String, String> map = new HashMap<String, String>();

		String jsons = "{\"result\":0,\"object\":[{\"config_strategy\":{\"delay\":50,\"full_search\":false,\"hops\":2,\"lost\":50,\"max_delay\":400,\"max_lost\":80,\"max_price\":2000,\"path_num\":3,\"price\":10,\"quality_priority\":true,\"timeout\":\"100000\",\"transit_amplifying\":true},\"dest_user_info\":{\"device_type\":0,\"domain\":\"\",\"domain_index\":0,\"inbound_band\":0,\"isp\":\"\",\"isp_index\":0,\"net_type\":0,\"os\":0,\"outbound_band\":0,\"udp_ip\":\"20.0.0.2\",\"udp_port\":0,\"user_id\":\"1\",\"user_type\":0},\"getpath_strategy\":{\"delay\":50,\"full_search\":false,\"hops\":2,\"lost\":50,\"max_delay\":400,\"max_lost\":80,\"max_price\":2000,\"path_num\":3,\"price\":10,\"quality_priority\":false,\"timeout\":\"100000\",\"transit_amplifying\":false},\"reachable_path_array\":[{\"path_info\":\"(Us-->10.130.36.234(4)-->Ud\",\"quality\":\"(4,4,2)\"},{\"path_info\":\"(Us-->10.130.36.238(8)-->10.130.36.242(12)-->Ud\",\"quality\":\"(1,1,2)\"},{\"path_info\":\"(Us-->10.130.36.241(11)-->Ud\",\"quality\":\"(8,8,2)\"},{\"path_info\":\"(Us-->10.130.36.238(8)-->10.130.36.242(12)-->Ud\",\"quality\":\"(1,1,2)\"},{\"path_info\":\"(Us-->10.130.36.231(1)-->10.130.36.232(2)-->Ud\",\"quality\":\"(3,3,4)\"},{\"path_info\":\"(Us-->10.130.36.231(1)-->10.130.36.233(3)-->Ud\",\"quality\":\"(3,3,4)\"},{\"path_info\":\"(Us-->10.130.36.235(5)-->10.130.36.236(6)-->Ud\",\"quality\":\"(5,3,4)\"},{\"path_info\":\"(Us-->10.130.36.235(5)-->10.130.36.237(7)-->Ud\",\"quality\":\"(5,3,4)\"}],\"relay_info\":[{\"enable\":true,\"payLoadInfo\":{\"connect_num\":0,\"cpu\":0,\"detect_num\":0,\"inbound\":0,\"mem\":0,\"outbound\":0,\"session_num\":0},\"reg_guid\":\"1\",\"relayInfo\":{\"domain\":\"rrrr\",\"domain_index\":1757542,\"iperf_ip\":\"32312\",\"iperf_port\":22,\"isp\":\"44\",\"isp_index\":44,\"max_connet_num\":100,\"max_detect_num\":100,\"max_inbound\":100,\"max_outbound\":100,\"max_session_num\":100,\"media_ip\":\"10.130.36.231\",\"media_port\":44,\"name\":\"北京\",\"price\":2,\"relayID\":1}},{\"enable\":true,\"payLoadInfo\":{\"connect_num\":0,\"cpu\":0,\"detect_num\":0,\"inbound\":0,\"mem\":0,\"outbound\":0,\"session_num\":0},\"reg_guid\":\"2\",\"relayInfo\":{\"domain\":\"rrrr\",\"domain_index\":2527557,\"iperf_ip\":\"32312\",\"iperf_port\":22,\"isp\":\"44\",\"isp_index\":45,\"max_connet_num\":100,\"max_detect_num\":100,\"max_inbound\":100,\"max_outbound\":100,\"max_session_num\":100,\"media_ip\":\"10.130.36.232\",\"media_port\":44,\"name\":\"北京\",\"price\":2,\"relayID\":2}},{\"enable\":true,\"payLoadInfo\":{\"connect_num\":0,\"cpu\":0,\"detect_num\":0,\"inbound\":0,\"mem\":0,\"outbound\":0,\"session_num\":0},\"reg_guid\":\"3\",\"relayInfo\":{\"domain\":\"rrrr\",\"domain_index\":2498947,\"iperf_ip\":\"32312\",\"iperf_port\":22,\"isp\":\"44\",\"isp_index\":46,\"max_connet_num\":100,\"max_detect_num\":100,\"max_inbound\":100,\"max_outbound\":100,\"max_session_num\":100,\"media_ip\":\"10.130.36.233\",\"media_port\":44,\"name\":\"北京\",\"price\":2,\"relayID\":3}},{\"enable\":true,\"payLoadInfo\":{\"connect_num\":0,\"cpu\":0,\"detect_num\":0,\"inbound\":0,\"mem\":0,\"outbound\":0,\"session_num\":0},\"reg_guid\":\"4\",\"relayInfo\":{\"domain\":\"rrrr\",\"domain_index\":2114238,\"iperf_ip\":\"32312\",\"iperf_port\":22,\"isp\":\"44\",\"isp_index\":44,\"max_connet_num\":100,\"max_detect_num\":100,\"max_inbound\":100,\"max_outbound\":100,\"max_session_num\":100,\"media_ip\":\"10.130.36.234\",\"media_port\":44,\"name\":\"北京\",\"price\":2,\"relayID\":4}},{\"enable\":true,\"payLoadInfo\":{\"connect_num\":0,\"cpu\":0,\"detect_num\":0,\"inbound\":0,\"mem\":0,\"outbound\":0,\"session_num\":0},\"reg_guid\":\"5\",\"relayInfo\":{\"domain\":\"rrrr\",\"domain_index\":1728992,\"iperf_ip\":\"32312\",\"iperf_port\":22,\"isp\":\"44\",\"isp_index\":44,\"max_connet_num\":100,\"max_detect_num\":100,\"max_inbound\":100,\"max_outbound\":100,\"max_session_num\":100,\"media_ip\":\"10.130.36.235\",\"media_port\":44,\"name\":\"北京\",\"price\":2,\"relayID\":5}},{\"enable\":true,\"payLoadInfo\":{\"connect_num\":0,\"cpu\":0,\"detect_num\":0,\"inbound\":0,\"mem\":0,\"outbound\":0,\"session_num\":0},\"reg_guid\":\"6\",\"relayInfo\":{\"domain\":\"rrrr\",\"domain_index\":2503117,\"iperf_ip\":\"32312\",\"iperf_port\":22,\"isp\":\"44\",\"isp_index\":44,\"max_connet_num\":100,\"max_detect_num\":100,\"max_inbound\":100,\"max_outbound\":100,\"max_session_num\":100,\"media_ip\":\"10.130.36.236\",\"media_port\":44,\"name\":\"北京\",\"price\":2,\"relayID\":6}},{\"enable\":true,\"payLoadInfo\":{\"connect_num\":0,\"cpu\":0,\"detect_num\":0,\"inbound\":0,\"mem\":0,\"outbound\":0,\"session_num\":0},\"reg_guid\":\"7\",\"relayInfo\":{\"domain\":\"rrrr\",\"domain_index\":2445828,\"iperf_ip\":\"32312\",\"iperf_port\":22,\"isp\":\"44\",\"isp_index\":44,\"max_connet_num\":100,\"max_detect_num\":100,\"max_inbound\":100,\"max_outbound\":100,\"max_session_num\":100,\"media_ip\":\"10.130.36.237\",\"media_port\":44,\"name\":\"北京\",\"price\":2,\"relayID\":7}},{\"enable\":true,\"payLoadInfo\":{\"connect_num\":0,\"cpu\":0,\"detect_num\":0,\"inbound\":0,\"mem\":0,\"outbound\":0,\"session_num\":0},\"reg_guid\":\"8\",\"relayInfo\":{\"domain\":\"rrrr\",\"domain_index\":1958642,\"iperf_ip\":\"32312\",\"iperf_port\":22,\"isp\":\"44\",\"isp_index\":44,\"max_connet_num\":100,\"max_detect_num\":100,\"max_inbound\":100,\"max_outbound\":100,\"max_session_num\":100,\"media_ip\":\"10.130.36.238\",\"media_port\":44,\"name\":\"北京\",\"price\":2,\"relayID\":8}},{\"enable\":true,\"payLoadInfo\":{\"connect_num\":0,\"cpu\":0,\"detect_num\":0,\"inbound\":0,\"mem\":0,\"outbound\":0,\"session_num\":0},\"reg_guid\":\"9\",\"relayInfo\":{\"domain\":\"rrrr\",\"domain_index\":1774148,\"iperf_ip\":\"32312\",\"iperf_port\":22,\"isp\":\"44\",\"isp_index\":44,\"max_connet_num\":100,\"max_detect_num\":100,\"max_inbound\":100,\"max_outbound\":100,\"max_session_num\":100,\"media_ip\":\"10.130.36.239\",\"media_port\":44,\"name\":\"北京\",\"price\":2,\"relayID\":9}},{\"enable\":true,\"payLoadInfo\":{\"connect_num\":0,\"cpu\":0,\"detect_num\":0,\"inbound\":0,\"mem\":0,\"outbound\":0,\"session_num\":0},\"reg_guid\":\"10\",\"relayInfo\":{\"domain\":\"rrrr\",\"domain_index\":2396745,\"iperf_ip\":\"32312\",\"iperf_port\":22,\"isp\":\"44\",\"isp_index\":44,\"max_connet_num\":100,\"max_detect_num\":100,\"max_inbound\":100,\"max_outbound\":100,\"max_session_num\":100,\"media_ip\":\"10.130.36.240\",\"media_port\":44,\"name\":\"北京\",\"price\":2,\"relayID\":10}},{\"enable\":true,\"payLoadInfo\":{\"connect_num\":0,\"cpu\":0,\"detect_num\":0,\"inbound\":0,\"mem\":0,\"outbound\":0,\"session_num\":0},\"reg_guid\":\"11\",\"relayInfo\":{\"domain\":\"rrrr\",\"domain_index\":2114181,\"iperf_ip\":\"32312\",\"iperf_port\":22,\"isp\":\"44\",\"isp_index\":44,\"max_connet_num\":100,\"max_detect_num\":100,\"max_inbound\":100,\"max_outbound\":100,\"max_session_num\":100,\"media_ip\":\"10.130.36.241\",\"media_port\":44,\"name\":\"北京\",\"price\":2,\"relayID\":11}},{\"enable\":true,\"payLoadInfo\":{\"connect_num\":0,\"cpu\":0,\"detect_num\":0,\"inbound\":0,\"mem\":0,\"outbound\":0,\"session_num\":0},\"reg_guid\":\"12\",\"relayInfo\":{\"domain\":\"rrrr\",\"domain_index\":2482930,\"iperf_ip\":\"32312\",\"iperf_port\":22,\"isp\":\"44\",\"isp_index\":44,\"max_connet_num\":100,\"max_detect_num\":100,\"max_inbound\":100,\"max_outbound\":100,\"max_session_num\":100,\"media_ip\":\"10.130.36.242\",\"media_port\":44,\"name\":\"北京\",\"price\":2,\"relayID\":12}}],\"req_id\":\"_0\",\"req_s_b\":\"0010\",\"req_strategy\":\"0x2\",\"req_time\":\"2014-2-13 17:45:59\",\"resp_cmd_path_array\":[{\"path_id\":2,\"path_net_q\":4.997300624847412,\"path_price\":4,\"property\":\"best\",\"sub_path_array\":[{\"path_info\":\"(Us-->10.130.36.238(8)-->10.130.36.242(12)-->Ud\",\"quality\":\"(1,1,2)\"}],\"transit_amplifying\":false},{\"path_id\":5,\"path_net_q\":4.99190616607666,\"path_price\":8,\"property\":\"best\",\"sub_path_array\":[{\"path_info\":\"(Us-->10.130.36.231(1)-->10.130.36.232(2)-->Ud\",\"quality\":\"(3,3,4)\"}],\"transit_amplifying\":false},{\"path_id\":7,\"path_net_q\":4.987914085388184,\"path_price\":8,\"property\":\"best\",\"sub_path_array\":[{\"path_info\":\"(Us-->10.130.36.235(5)-->10.130.36.236(6)-->Ud\",\"quality\":\"(5,3,4)\"}],\"transit_amplifying\":false}],\"rr_link_info\":[{\"link_info\":[{\"delay\":1,\"direction\":\"up\",\"jitter\":0,\"lost\":1,\"srcIP\":\"10.130.36.231\",\"srcRelayID\":1,\"targetIP\":\"10.130.36.232\",\"targetRelayID\":2,\"updateTime\":\"2014-2-8 9:24:5:0\"},{\"delay\":1,\"direction\":\"up\",\"jitter\":0,\"lost\":1,\"srcIP\":\"10.130.36.231\",\"srcRelayID\":1,\"targetIP\":\"10.130.36.233\",\"targetRelayID\":3,\"updateTime\":\"2014-2-8 9:24:12:0\"}],\"src_relayID\":1},{\"link_info\":[{\"delay\":1,\"direction\":\"up\",\"jitter\":0,\"lost\":2,\"srcIP\":\"10.130.36.235\",\"srcRelayID\":5,\"targetIP\":\"10.130.36.236\",\"targetRelayID\":6,\"updateTime\":\"2014-2-8 9:24:18:0\"},{\"delay\":1,\"direction\":\"up\",\"jitter\":0,\"lost\":2,\"srcIP\":\"10.130.36.235\",\"srcRelayID\":5,\"targetIP\":\"10.130.36.237\",\"targetRelayID\":7,\"updateTime\":\"2014-2-8 9:24:22:0\"}],\"src_relayID\":5}],\"src_user_info\":{\"device_type\":0,\"domain\":\"\",\"domain_index\":0,\"inbound_band\":0,\"isp\":\"\",\"isp_index\":0,\"net_type\":0,\"os\":0,\"outbound_band\":0,\"udp_ip\":\"20.0.0.1\",\"udp_port\":0,\"user_id\":\"0\",\"user_type\":0},\"twins_relay\":[{\"relayID1\":12,\"relayID2\":8}],\"ur_link_info\":{\"R->U_self\":[{\"delay\":1,\"direction\":\"down\",\"jitter\":0,\"lost\":1,\"relayID\":2,\"srcIP\":\"20.0.0.2\",\"targetIP\":\"10.130.36.232\",\"updateTime\":\"2014-2-8 9:24:34:0\",\"userID\":\"1\"},{\"delay\":1,\"direction\":\"down\",\"jitter\":0,\"lost\":1,\"relayID\":3,\"srcIP\":\"20.0.0.2\",\"targetIP\":\"10.130.36.233\",\"updateTime\":\"2014-2-8 9:24:40:0\",\"userID\":\"1\"},{\"delay\":0,\"direction\":\"down\",\"jitter\":0,\"lost\":0,\"relayID\":4,\"srcIP\":\"20.0.0.2\",\"targetIP\":\"10.130.36.234\",\"updateTime\":\"2014-2-10 10:9:31:0\",\"userID\":\"1\"},{\"delay\":1,\"direction\":\"down\",\"jitter\":0,\"lost\":2,\"relayID\":6,\"srcIP\":\"20.0.0.2\",\"targetIP\":\"10.130.36.236\",\"updateTime\":\"2014-2-8 9:24:45:0\",\"userID\":\"1\"},{\"delay\":1,\"direction\":\"down\",\"jitter\":0,\"lost\":2,\"relayID\":7,\"srcIP\":\"20.0.0.2\",\"targetIP\":\"10.130.36.237\",\"updateTime\":\"2014-2-8 9:24:49:0\",\"userID\":\"1\"},{\"delay\":0,\"direction\":\"down\",\"jitter\":0,\"lost\":0,\"relayID\":10,\"srcIP\":\"20.0.0.2\",\"targetIP\":\"10.130.36.240\",\"updateTime\":\"2014-2-10 10:8:24:0\",\"userID\":\"1\"},{\"delay\":4,\"direction\":\"down\",\"jitter\":0,\"lost\":4,\"relayID\":11,\"srcIP\":\"20.0.0.2\",\"targetIP\":\"10.130.36.241\",\"updateTime\":\"2014-2-8 9:25:3:0\",\"userID\":\"1\"},{\"delay\":0,\"direction\":\"down\",\"jitter\":0,\"lost\":0,\"relayID\":12,\"srcIP\":\"20.0.0.2\",\"targetIP\":\"10.130.36.242\",\"updateTime\":\"2014-2-11 16:53:36:0\",\"userID\":\"1\"}],\"U->R_self\":[{\"delay\":1,\"direction\":\"up\",\"jitter\":0,\"lost\":1,\"relayID\":1,\"srcIP\":\"20.0.0.1\",\"targetIP\":\"10.130.36.231\",\"updateTime\":\"2014-2-8 9:23:40:0\",\"userID\":\"0\"},{\"delay\":4,\"direction\":\"up\",\"jitter\":0,\"lost\":4,\"relayID\":4,\"srcIP\":\"20.0.0.1\",\"targetIP\":\"10.130.36.234\",\"updateTime\":\"2014-2-10 10:9:20:0\",\"userID\":\"0\"},{\"delay\":1,\"direction\":\"up\",\"jitter\":0,\"lost\":1,\"relayID\":5,\"srcIP\":\"20.0.0.1\",\"targetIP\":\"10.130.36.235\",\"updateTime\":\"2014-2-8 9:23:45:0\",\"userID\":\"0\"},{\"delay\":1,\"direction\":\"up\",\"jitter\":0,\"lost\":1,\"relayID\":8,\"srcIP\":\"20.0.0.1\",\"targetIP\":\"10.130.36.238\",\"updateTime\":\"2014-2-10 10:9:6:0\",\"userID\":\"0\"},{\"delay\":3,\"direction\":\"up\",\"jitter\":0,\"lost\":3,\"relayID\":9,\"srcIP\":\"20.0.0.1\",\"targetIP\":\"10.130.36.239\",\"updateTime\":\"2014-2-8 9:23:50:0\",\"userID\":\"0\"},{\"delay\":4,\"direction\":\"up\",\"jitter\":0,\"lost\":4,\"relayID\":11,\"srcIP\":\"20.0.0.1\",\"targetIP\":\"10.130.36.241\",\"updateTime\":\"2014-2-8 9:23:55:0\",\"userID\":\"0\"}]}}]}";

		JSONObject json = JSONObject.fromObject(jsons);

		JSONArray object = json.getJSONArray("object");

		// 取得reachable_path_array数组
		JSONArray reachable_path_array = ((JSONObject) object.get(0)).getJSONArray("reachable_path_array");
		System.out.println(reachable_path_array.size());

		// 循环reachable_path_array数组
		for (int i = 0; i < reachable_path_array.size(); i++) {
			String quality = ((JSONObject) reachable_path_array.get(i)).getString("quality");
			String path_info = ((JSONObject) reachable_path_array.get(i)).getString("path_info");
			System.err.println(quality + "   " + path_info);
			map.put("quality_" + i, quality);
			map.put("path_info_" + i, path_info);
		}
		return map;
		
	}

}
